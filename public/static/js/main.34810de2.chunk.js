(this["webpackJsonpsocket-webchat"]=this["webpackJsonpsocket-webchat"]||[]).push([[0],{42:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},43:function(e,t,a){"use strict";(function(e){var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_WEBSITE_NAME:"SOCKET WEBCHAT REACT",REACT_APP_BASEURL:"http://localhost",REACT_APP_PORT:"3131"}).REACT_APP_HOST||"http://localhost",n=e.REACT_APP_PROD_BASEURL||window.location.origin;t.a={production:{baseURL:n},development:{baseURL:"".concat(a,":").concat("3131")}}}).call(this,a(10))},45:function(e,t,a){e.exports=a(92)},50:function(e,t,a){},81:function(e,t){},85:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(39),l=a.n(o),r=(a(50),a(44)),s=a(7),i=a(40),m=a.n(i),u=a(94),d=a(95),E=a(96),p=a(98),f=a(97),b=a(99),g=a(100),T=a(41),h=a(42),v=a.n(h),O=(a(85),a(86),a(43));var y=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),h=i[0],y=i[1],A=Object(n.useState)(null),S=Object(s.a)(A,2),_=S[0],C=S[1],j=Object(n.useState)({event:!1,user:null}),N=Object(s.a)(j,2),R=N[0],P=N[1],B=Object(n.useState)(!1),w=Object(s.a)(B,2),k=w[0],x=w[1],W=function(e){e.preventDefault(),h&&(D(),_.emit("message",h),y(""))},L=function(){k&&(console.log("off",k),x(!1),_.emit("typing",!1))},U=Object(n.useCallback)(T.debounce(L,5e3,{trailing:!0}),[k]),D=function(){L(),U.cancel()};return Object(n.useEffect)((function(){var e=m()("".concat(O.a.production.baseURL,"/socket"));return C(e),e.on("message",(function(e){o((function(t){return[].concat(Object(r.a)(t),[e])}))})),e.on("typing",(function(e){P(e)})),function(){_.disconnect()}}),[]),Object(n.useEffect)((function(){!function(){var e=a.length-1,t=document.getElementById(""+e),n=document.getElementById("app-typing"),c=document.getElementById("app-container");t&&c.scrollTo(0,t.offsetTop),n&&c.scrollTo(0,n.offsetTop)}()}),[a.length,R]),Object(n.useEffect)((function(e){console.log("userTyping changed",k)}),[k]),c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"App-header"},c.a.createElement("img",{src:v.a,alt:"logo",className:"App-logo"}),c.a.createElement("h1",null,"SOCKET WEBCHAT REACT")),c.a.createElement("div",{id:"app-container",className:"App-container"},c.a.createElement(u.a,null,a.map((function(e,t){return"text"===e.type?e.sender===_.id?c.a.createElement(d.a,{id:t,key:t,className:"mt-3"},c.a.createElement(E.a,{md:{span:5,offset:7}},c.a.createElement(p.a,{bg:"info"},c.a.createElement(p.a.Body,null,c.a.createElement(p.a.Subtitle,{className:"mb-2 text-muted"},e.sender),c.a.createElement(p.a.Text,null,e.text))))):c.a.createElement(d.a,{id:t,key:t,className:"mt-3"},c.a.createElement(E.a,{md:5},c.a.createElement(p.a,null,c.a.createElement(p.a.Body,null,c.a.createElement(p.a.Subtitle,{className:"mb-2 text-muted"},e.sender),c.a.createElement(p.a.Text,null,e.text))))):"event"===e.type?c.a.createElement(d.a,{id:t,key:t,className:"justify-content-md-center mt-3"},c.a.createElement(p.a,{bg:"secondary",text:"white"},c.a.createElement(p.a.Text,{className:"mx-3"},e.user," ",e.event))):void 0})),R.event&&c.a.createElement(d.a,{id:"app-typing",className:"mt-3"},R.user," is typing..."))),c.a.createElement("div",{className:"App-footer"},c.a.createElement(u.a,{fluid:!0},c.a.createElement("form",{onSubmit:W},c.a.createElement(f.a,{className:"mb-3"},c.a.createElement(b.a,{placeholder:"Write your message here","aria-label":"Write your message here","aria-describedby":"basic-addon2",value:h,onChange:function(e){k?U():k||(console.log("on",k),x(!0),_.emit("typing",!0)),y(e.target.value)},onBlur:D}),c.a.createElement(f.a.Append,null,c.a.createElement(g.a,{onClick:W},"Send")))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.34810de2.chunk.js.map